# Coin Runner - 게임 기획서 v1.1

## 1. 게임 개요

| 항목 | 내용 |
|------|------|
| **게임명** | Coin Runner (코인 러너) |
| **장르** | 횡스크롤 코인 수집 러너 |
| **타겟 연령** | 6~12세 |
| **플레이 인원** | 싱글 플레이 (멀티플레이어 서버, 개별 인스턴스) |
| **플랫폼** | Roblox (PC, 모바일, 태블릿) |
| **세션 시간** | 1회 플레이 2~5분 |

## 2. 게임 컨셉

> "뛰고, 점프하고, 코인을 모아라!"

플레이어 캐릭터가 자동으로 달리며, 장애물을 피하고 코인을 수집하는 간단한 횡스크롤 러너 게임.
저연령층이 복잡한 조작 없이 **점프**와 **슬라이드** 두 가지 동작만으로 즐길 수 있다.

## 3. 핵심 게임플레이

### 3.1 조작 방법

| 조작 | PC | 모바일 |
|------|-----|--------|
| **점프** | Space / W / ↑ | 화면 오른쪽 탭 |
| **슬라이드** | S / ↓ | 화면 왼쪽 탭 |
| **일시정지** | ESC / P | 상단 일시정지 버튼 |

- 2단 점프: 공중에서 한 번 더 점프 가능 (높은 코인 수집용)
- 슬라이드: 낮은 장애물 통과, 0.6초 후 자동 복귀
- 슬라이드 중 점프 불가 (슬라이드 해제 후 점프 가능)
- Roblox 기본 점프 버튼/이동 UI는 비활성화 (커스텀 UI 사용)

### 3.2 기본 메카닉

```
[자동 달리기] → [장애물 회피] → [코인 수집] → [점수 획득]
         ↓                                    ↓
    [속도 점진 증가]                     [상점에서 아이템 구매]
```

- **자동 달리기**: 캐릭터는 자동으로 오른쪽으로 달린다
- **속도 증가**: 시간이 지날수록 서서히 속도가 증가한다 (난이도 상승)
- **코인 수집**: 경로에 배치된 코인을 터치하면 자동 수집
- **장애물**: 부딪히면 라이프 1개 소모
- **라이프**: 기본 3개, 모두 소진 시 게임 오버

### 3.3 물리 파라미터

| 항목 | 값 | 비고 |
|------|-----|------|
| **캐릭터 크기** | 4×5 studs (폭×높이) | 커스텀 리그, Z축 고정 |
| **1단 점프 높이** | 8 studs | 낮은 벽(4 studs) 충분히 넘음 |
| **2단 점프 높이** | +5 studs (총 12 studs) | 1단 정점에서 추가 점프 |
| **점프 체공 시간** | 0.7초 (1단) / 1.1초 (2단) | 포물선 궤적 |
| **슬라이드 히트박스** | 4×2.5 studs (폭×높이) | 터널 통로 3 studs 통과 가능 |
| **슬라이드 지속** | 0.6초 (자동 해제) | 버튼 유지 시 연장 불가 |
| **Z축 고정** | Z=0 고정 (Constraint) | 2D 평면 유지 |

#### 속도별 점프 수평 도달 거리

| 이동 속도 | 1단 점프 거리 | 2단 점프 거리 |
|-----------|---------------|---------------|
| 25 studs/s | 17.5 studs | 27.5 studs |
| 38 studs/s | 26.6 studs | 41.8 studs |
| 55 studs/s | 38.5 studs | 60.5 studs |

> 구덩이 최대 폭(10 studs)은 최저 속도(25 studs/s)의 1단 점프(17.5 studs)로도 충분히 통과 가능.

### 3.4 점수 시스템

| 점수 요소 | 계산 방식 |
|-----------|-----------|
| **이동 거리** | 1 stud = 1점 (소수점 버림) |
| **코인 점수** | 브론즈 1, 실버 5, 골드 10, 다이아 50 |
| **Near Miss** | 장애물 아슬아슬 회피 시 +5점 |
| **콤보 보너스** | 10콤보 +10, 30콤보 +30, 50콤보 +50 (1회성) |
| **총 점수** | 이동 거리 + 코인 점수 + Near Miss + 콤보 보너스 |

- 리더보드 기준: **총 점수**
- 개인 최고 기록(하이스코어)은 MVP에 포함

### 3.5 코인 종류

| 코인 | 색상 | 형태 | 점수 | 출현 빈도 |
|------|------|------|------|-----------|
| **브론즈 코인** | 갈색 | 작은 원형 (1x) | 1점 | 매우 높음 |
| **실버 코인** | 은색 + 반짝임 | 중간 원형 (1.3x) | 5점 | 보통 |
| **골드 코인** | 금색 + 빛남 | 큰 원형 (1.6x) + 별 파티클 | 10점 | 낮음 |
| **다이아 코인** | 파란색 + 무지개빛 | 다이아몬드 형태 (2x) + 글로우 | 50점 | 매우 낮음 |

> 색상 외에 **크기와 형태**로도 구분 가능 → 색맹/색약 아동 대응

### 3.6 장애물 종류

| 장애물 | 회피 방법 | 설명 | 등장 시점 |
|--------|-----------|------|-----------|
| **낮은 벽** | 점프 | 작은 블록 장애물 (높이 4 studs) | 게임 시작부터 |
| **높은 벽** | 슬라이드 | 위쪽이 막힌 터널형 (통로 3 studs) | 15초 이후 |
| **구덩이** | 점프 | 바닥이 빈 구간 (폭 6~10 studs) | 30초 이후 |
| **움직이는 벽** | 타이밍 점프 | 상하 왕복 장애물 (MVP 제외) | 90초 이후 |

### 3.7 파워업 아이템

| 아이템 | 효과 | 지속시간 | 비고 |
|--------|------|----------|------|
| **자석** | 반경 15 studs 내 코인 자동 흡수 | 5초 | 모든 코인 종류 흡수 |
| **쉴드** | 장애물 1회 무시 | 1회 사용 시 소멸 | 피격 시 버블 깨지는 연출 |
| **2x 코인** | 코인 점수 2배 | 8초 | 이동 거리 점수에는 미적용 |
| **미니 사이즈** | 히트박스 2×2.5 studs로 축소 | 5초 | 점프 높이 유지, 터널 슬라이드 없이 통과 |

#### 파워업 중첩 규칙
- 같은 파워업 중첩: 지속시간 갱신 (누적 아님)
- 다른 파워업 중첩: 동시 적용 가능 (예: 자석 + 2x 코인)
- 미니 사이즈 + 쉴드: 둘 다 활성
- 자석 흡수 시 코인은 물리적으로 캐릭터 방향으로 이동 후 획득 (시각적 궤적)

## 4. 게임 흐름

```
[로비 화면]
    ├── [플레이] → [카운트다운 3,2,1] → [게임 시작]
    │       ├── [일시정지] → [이어하기 / 로비로]
    │       └── [게임 오버] → [부활? Y/N] → [결과 화면] → [로비]
    ├── [상점] → [캐릭터/펫/이펙트 구매] (v1.1)
    ├── [컬렉션] → [수집한 아이템 확인] (v1.1)
    └── [리더보드] → [하이스코어 확인] (v1.1)
```

### 4.1 로비 화면

- 심플한 메인 화면: 큰 "PLAY" 버튼
- 현재 보유 코인 표시
- 개인 최고 기록 표시
- 하단 메뉴: 상점, 컬렉션, 리더보드 (v1.1, MVP에서는 비활성)

### 4.2 게임 플레이 화면

- 상단 좌측: 현재 점수 (이동 거리 기반, 실시간 증가)
- 상단 우측: 보유 라이프 (하트 아이콘)
- 상단 중앙: 현재 코인 수
- 하단: 모바일 조작 버튼 (모바일만)
- 활성 파워업 아이콘 + 남은 시간 바 표시
- 상단 우측 모서리: 일시정지 버튼

### 4.3 일시정지

- 게임 일시정지 시: 캐릭터 정지, 청크 로딩 정지, 속도 타이머 정지
- UI: "이어하기" / "로비로 나가기" 버튼
- 로비로 나가기 시 해당 판의 획득 코인은 보존 (DataStore 저장)
- 점수/하이스코어는 게임 오버 시에만 확정

### 4.4 게임 오버 화면

- 획득 점수 / 최고 기록 비교
- **NEW RECORD!** 연출 (갱신 시)
- 획득 코인 수
- "다시하기" / "로비" 버튼
- **부활 기회**: 1판당 1회 제한

### 4.5 부활 시스템

| 항목 | 값 |
|------|-----|
| 부활 횟수 | 1판당 1회 |
| 부활 비용 | 젬 5개 (MVP에서는 무료 1회) |
| 부활 위치 | 마지막 안전 바닥 위 |
| 부활 후 라이프 | 1개 복구 |
| 부활 후 무적 | 3초 |
| 부활 후 속도 | 현재 속도의 80%로 감소 (서서히 원래 속도로 복귀) |
| 부활 연출 | 하늘에서 떨어지며 착지 + 반짝임 이펙트 |

### 4.6 이탈 방지 메카닉

| 장치 | 설명 |
|------|------|
| **위로 보상** | 연속 3회 게임 오버 시 "힘내! 선물이야!" + 코인 20 지급 |
| **베스트 기록 근접 알림** | "최고 기록까지 100점!" 텍스트 표시 |
| **누적 보상** | 누적 플레이 횟수 5/10/20/50회마다 코인 보상 |
| **쉬운 시작** | 매 판 첫 30초는 항상 Easy → 성공 경험 보장 |

## 5. 월드 시스템

### 5.1 테마 월드 (향후 확장 가능)

| 월드 | 테마 | 특징 |
|------|------|------|
| **월드 1** | 초원 | 기본 스테이지, 밝은 색감, 쉬운 난이도 |
| **월드 2** | 도시 (잠금)| 빌딩 배경, 중간 난이도 |
| **월드 3** | 우주 (잠금)| 낮은 중력, 높은 난이도 |

- **v1.0에서는 월드 1 (초원)만 구현**
- 이후 업데이트로 월드 추가

### 5.2 맵 구성 방식

- **청크 기반 무한 생성**: 미리 만든 맵 청크를 랜덤으로 이어붙이는 방식
- 청크 난이도 단계: Easy / Normal / Hard / Bonus
- 게임 진행 시간에 따라 높은 난이도 청크 출현 비율 증가
- 지나간 청크는 자동 삭제 (메모리 관리)
- 상세 설계: `docs/design/level-design.md` 참조

## 6. 경제 시스템 & 수익화

### 6.1 재화

| 재화 | 획득 방법 | 용도 |
|------|-----------|------|
| **코인 (무료)** | 게임 플레이, 레벨업 보상, 업적 보상 | 기본 아이템 구매 |
| **젬 (프리미엄)** | Robux 구매, 업적 보상 (소량), 레벨업 보상 | 프리미엄 아이템, 부활 |

### 6.2 코인 획득률 시뮬레이션

| 플레이어 수준 | 생존 시간 | 예상 획득 코인 | 예상 점수 |
|---------------|-----------|---------------|-----------|
| 초보 (6세) | 30~60초 | 30~60 코인 | 300~800점 |
| 중급 (8~10세) | 60~120초 | 80~150 코인 | 1000~3000점 |
| 숙련 (12세+) | 120~200초 | 150~300 코인 | 3000~8000점 |

> 기준: 초당 평균 1~2 코인 수집 (파워업 미적용)

#### 아이템 구매까지 예상 플레이 횟수

| 아이템 | 가격 | 초보 기준 | 중급 기준 |
|--------|------|-----------|-----------|
| 별가루 트레일 | 200 코인 | 4~7판 | 2~3판 |
| 닌자 스킨 | 500 코인 | 9~17판 | 4~7판 |
| 강아지 펫 | 300 코인 | 5~10판 | 2~4판 |

> 하루 10판 기준, 초보도 2~3일이면 첫 아이템 구매 가능

### 6.3 Robux 상품 (수익화) - v1.1

아동 친화적이고 부담 없는 가격대:

| 상품 | 가격 (Robux) | 내용 |
|------|-------------|------|
| **스타터 팩** | 49 | 젬 100 + 랜덤 펫 1마리 |
| **젬 소량** | 25 | 젬 50 |
| **젬 중량** | 75 | 젬 200 (보너스 +50) |
| **젬 대량** | 149 | 젬 500 (보너스 +150) |
| **VIP 패스** | 99 | 코인 2배 영구 + VIP 뱃지 |

### 6.4 상점 아이템 - v1.1

#### 캐릭터 스킨

| 스킨 | 가격 | 재화 |
|------|------|------|
| 기본 캐릭터 | 무료 | - |
| 닌자 | 500 코인 | 코인 |
| 로봇 | 1000 코인 | 코인 |
| 유니콘 | 100 젬 | 젬 |
| 드래곤 | 200 젬 | 젬 |

#### 펫 (따라다니는 동반자) - v1.1

| 펫 | 효과 | 가격 |
|----|------|------|
| 강아지 | 코인 +5% 보너스 | 300 코인 |
| 고양이 | 자석 범위 +20% | 500 코인 |
| 피닉스 | 코인 +10% 보너스 | 150 젬 |
| 드래곤 | 쉴드 시작 | 250 젬 |

#### 트레일 이펙트 (달릴 때 뒤에 남는 효과) - v1.1

| 이펙트 | 가격 | 재화 |
|--------|------|------|
| 별가루 | 200 코인 | 코인 |
| 무지개 | 400 코인 | 코인 |
| 불꽃 | 80 젬 | 젬 |
| 네온 | 120 젬 | 젬 |

### 6.5 수익화 원칙

- **Pay-to-Win 금지**: 유료 아이템은 외형(코스메틱) 위주
- **펫 효과는 미미하게**: 보너스를 5~10% 수준으로 제한
- **모든 아이템은 무료 재화로도 획득 가능** (시간 투자 필요)
- **사행성 요소 최소화**: 가챠/랜덤 박스 지양, 직접 구매 방식
- **아동 보호**: 과도한 구매 유도 UI 금지

## 7. 진행 시스템

### 7.1 플레이어 레벨

| 레벨 | 필요 경험치 | 보상 |
|------|-------------|------|
| 1 | 0 | 시작 |
| 2 | 100 | 젬 5 |
| 3 | 250 | 닌자 스킨 해금 |
| 5 | 600 | 자석 파워업 해금 |
| 10 | 2000 | 젬 20 + 랜덤 트레일 |
| 20 | 5000 | 프리미엄 칭호 |

- 경험치 = 획득 점수 × 0.5 (소수점 올림)
- 레벨업 시 팡파르 연출 + 보상

### 7.2 일일 미션 - v1.1

| 미션 | 보상 |
|------|------|
| 3판 플레이하기 | 코인 50 |
| 코인 100개 모으기 | 코인 30 |
| 점수 500점 달성하기 | 젬 3 |
| 장애물 50개 피하기 | 코인 80 |

### 7.3 업적 - v1.1

| 업적 | 조건 | 보상 |
|------|------|------|
| 첫 걸음 | 첫 게임 클리어 | 코인 100 |
| 코인 수집가 | 누적 코인 1000개 | 젬 10 |
| 스피드 러너 | 점수 5000점 달성 | 특별 트레일 |
| 불사신 | 노 데미지로 1000점 | 특별 칭호 |

## 8. 소셜 기능 - v1.1

### 8.1 리더보드

- **일간 / 주간 / 역대** 하이스코어 보드
- 상위 100명 표시
- 주간 1위에게 특별 보상 (젬 50)

### 8.2 향후 확장 (v2.0+)

- 친구와 같은 맵에서 경쟁 (멀티플레이어 레이스)
- 길드 시스템
- 시즌 패스

## 9. 기술 사양

### 9.1 서버-클라이언트 아키텍처

| 처리 | 담당 | 이유 |
|------|------|------|
| **청크 생성/삭제** | 서버 | 모든 플레이어에게 동일한 시드 보장 필요 없음 (개별 인스턴스) |
| **캐릭터 이동** | 클라이언트 | 반응성, 서버는 속도 파라미터만 전달 |
| **코인 획득 판정** | 클라이언트 요청 → 서버 승인 | 치트 방지 (서버에서 코인 존재 여부 검증) |
| **장애물 충돌** | 클라이언트 감지 → 서버 승인 | 반응성 + 검증 |
| **점수 계산** | 서버 | 변조 방지 |
| **DataStore 저장** | 서버 | Roblox 정책 (서버만 DataStore 접근 가능) |
| **파워업 효과** | 클라이언트 (시각) + 서버 (로직) | 즉각적 시각 피드백 + 서버 검증 |

#### 멀티플레이어 처리

- 각 플레이어는 **독립적인 러닝 인스턴스**를 가짐
- 다른 플레이어의 게임은 보이지 않음 (간섭 없음)
- 로비에서는 다른 플레이어 캐릭터가 보임 (소셜 요소)
- 서버 최대 인원: 20명 (로비 공유, 게임은 독립)
- 통신: RemoteEvent로 클라이언트→서버 요청, 서버→클라이언트 응답

### 9.2 카메라

- CameraType: `Scriptable` (Roblox 기본 카메라 완전 오버라이드)
- 횡스크롤 시점: 캐릭터를 화면 왼쪽 30% 지점에 고정
- 카메라가 캐릭터를 따라 오른쪽으로 이동
- Look-ahead: 이동 방향으로 5 studs 앞서기
- 수직 추적: 점프 시 부드럽게 따라감 (lerp 0.1)
- 플레이어 카메라 수동 조작 비활성화

### 9.3 Roblox 물리 및 캐릭터

- **캐릭터**: 커스텀 리그 (Roblox 기본 R6/R15 사용하되 이동은 스크립트 제어)
- **이동 방식**: CFrame 또는 BodyVelocity로 자동 전진 (Roblox 물리 엔진에 의존하지 않음)
- **Z축 잠금**: AlignPosition Constraint로 Z=0 고정
- **점프**: 커스텀 점프 (기본 Humanoid Jump 비활성화, 직접 Y축 제어)
- **충돌 감지**: Touched 이벤트 + Raycast 병행 (바닥 감지용)
- **Roblox 기본 UI 비활성화**: 점프 버튼, 이동 조이스틱, 채팅 최소화

### 9.4 성능 목표

- 60 FPS 유지 (모바일 포함)
- 동시 렌더링 청크: 최대 3개
- 지나간 청크 즉시 Destroy (내부 코인/장애물/NPC 포함 전체 정리)
- 파티클 이펙트 최소화 (모바일 고려)
- 청크 프리로드: 현재 청크 75% 지점에서 다음 청크 생성 시작

### 9.5 데이터 저장

- **DataStore 사용**: 플레이어 데이터 서버 저장

#### DataStore 스키마

```lua
PlayerData = {
    -- 재화
    coins = 0,           -- 보유 코인
    gems = 0,            -- 보유 젬

    -- 진행
    level = 1,           -- 플레이어 레벨
    exp = 0,             -- 현재 경험치
    highScore = 0,       -- 최고 점수
    totalCoins = 0,      -- 누적 코인 (업적용)
    totalGames = 0,      -- 누적 플레이 횟수

    -- 소유 아이템 (v1.1)
    ownedSkins = {},     -- 보유 스킨 ID 목록
    ownedPets = {},      -- 보유 펫 ID 목록
    ownedTrails = {},    -- 보유 트레일 ID 목록

    -- 장착 (v1.1)
    equippedSkin = "default",
    equippedPet = nil,
    equippedTrail = nil,

    -- 튜토리얼
    tutorialCompleted = false,

    -- 메타
    lastSaveTime = 0,
}
```

#### 저장 정책
- 저장 주기: 게임 오버 시 + 플레이어 퇴장 시 + 60초 주기 자동 저장
- Roblox DataStore 제한: key당 4MB, 6초당 1회 쓰기
- 저장 실패 시: 3회 재시도 (지수 백오프), 실패 시 메모리에 보존 후 다음 기회에 저장
- BindToClose로 서버 종료 시 전체 플레이어 데이터 강제 저장

### 9.6 접근성

| 항목 | 대응 |
|------|------|
| **색맹/색약** | 코인은 색상 + 크기 + 형태로 구분 (색상만 의존 안 함) |
| **청각 장애** | 모든 사운드 피드백에 대응하는 시각 피드백 존재 (텍스트, 파티클) |
| **모터 스킬** | 2버튼만 사용, 큰 터치 영역 (80×80px+), 자비 구간 규칙 |
| **광과민성** | 화면 플래시는 0.1초 이하, 1초 내 2회 이하 (OFCOM 기준 준수) |

### 9.7 Roblox 정책 준수

- **연령 등급**: All Ages (전체 이용가) 설정
- **COPPA 준수**: 개인정보 수집 없음, DataStore는 Roblox 계정 기반
- **유료 아이템**: Roblox Developer Product / GamePass 사용, DevEx 정책 준수
- **콘텐츠 가이드라인**: 폭력/공포 요소 없음, 아동 친화적 비주얼

## 10. v1.0 구현 범위 (MVP)

### 포함

- [x] 기본 횡스크롤 러너 메카닉 (자동 달리기, 점프, 슬라이드)
- [x] 코인 수집 (브론즈, 실버, 골드)
- [x] 기본 장애물 (낮은 벽, 높은 벽, 구덩이) - 움직이는 벽 제외
- [x] 라이프 시스템 (3개)
- [x] 점수 시스템 (이동 거리 + 코인) 및 개인 하이스코어
- [x] 게임 오버 / 재시작 / 무료 부활 1회
- [x] 기본 UI (점수, 코인, 라이프, 일시정지)
- [x] 청크 기반 맵 생성 (Easy / Normal / Hard / Bonus)
- [x] 월드 1 (초원) 테마
- [x] 파워업 (자석, 쉴드) - 기본 2종
- [x] 튜토리얼 (최초 1회)
- [x] 응원 NPC (토끼, 곰돌이) - 기본 2종
- [x] 가이드 NPC (부엉이, 튜토리얼용)
- [x] DataStore 저장
- [x] 콤보 시스템 + Near Miss
- [x] 일시정지

### v1.1 이후

- [ ] 상점 시스템 + 상인 NPC
- [ ] 캐릭터 스킨
- [ ] 펫 시스템
- [ ] 추가 파워업 (2x 코인, 미니 사이즈)
- [ ] 움직이는 벽 장애물
- [ ] 일일 미션
- [ ] 업적 시스템
- [ ] 리더보드
- [ ] Robux 상품
- [ ] 추가 NPC (펭귄, 여우)
- [ ] 추가 월드

## 11. 참고

- 유사 게임 레퍼런스: Temple Run, Subway Surfers, Cookie Run
- Roblox 인기 러너: Speed Run 4, Mega Fun Obby
- Roblox 아동 인기작: Adopt Me, Pet Simulator X, MeepCity
- 차별점: 심플한 횡스크롤 + 코인 수집에 집중, 저연령층 친화적 UI
